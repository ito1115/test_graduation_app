<div class="container">
  <div class="header">
    <h1>Edit Book</h1>
    <div class="header-actions">
      <%= link_to "View Book", @book, class: "btn btn-outline-primary" %>
      <%= link_to "Back to Books", books_path, class: "btn btn-secondary" %>
    </div>
  </div>

  <%= form_with model: @book, local: true, class: "book-form" do |form| %>
    <% if @book.errors.any? %>
      <div class="error-messages">
        <h3><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h3>
        <ul>
          <% @book.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :title, class: "form-label required" %>
      <%= form.text_field :title, class: "form-control", placeholder: "Enter book title", required: true %>
    </div>

    <div class="form-group">
      <%= form.label :purchase_reason, "購入理由", class: "form-label required" %>
      <%= form.text_area :purchase_reason, class: "form-control", rows: 3, placeholder: "なぜこの本を購入しましたか？", required: true %>
      <small class="form-text">例: 仕事のスキルアップのため、趣味で読みたい、友人に勧められた など</small>
    </div>

    <div class="form-group">
      <%= form.label :purchase_date, "購入日", class: "form-label required" %>
      <%= form.date_field :purchase_date, class: "form-control", required: true %>
      <small class="form-text">本を購入した日（予定日も含む）</small>
    </div>

    <div class="form-group">
      <div class="radio-group">
        <%= form.radio_button :reading_status, 'wish', checked: (@book.reading_status || 'wish') == 'wish', class: "radio-input" %>
        <%= form.label :reading_status_wish, '読みたい', class: "radio-label" %>
        
        <%= form.radio_button :reading_status, 'tsundoku', class: "radio-input" %>
        <%= form.label :reading_status_tsundoku, '積読', class: "radio-label" %>
        
        <%= form.radio_button :reading_status, 'completed', class: "radio-input" %>
        <%= form.label :reading_status_completed, '読了', class: "radio-label" %>
      </div>
      <small class="form-text">現在の読書状況を選択してください</small>
    </div>

    <div class="form-actions">
      <%= form.submit "Update Book", class: "btn btn-primary" %>
      <%= link_to "Cancel", @book, class: "btn btn-secondary" %>
      <%= link_to "Delete Book", @book, data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this book?" }, 
                  class: "btn btn-danger" %>
    </div>
  <% end %>
</div>